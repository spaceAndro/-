<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>알러지 설문지</title>
	<link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="/css/signup.css">
	<link rel="stylesheet" href="/css/allergyForm.css">
</head>
<br>
<body>
	<center>
    <div class="container">
        <h2>알러지 설문지</h2>
		<br>
		<form action="/submit-survey" method="post" th:action="@{/submit-survey}" th:object="${allergyForm}">
		    <input type="hidden" name="_csrf" th:value="${_csrf.token}"> <!-- CSRF 토큰 추가 -->

		    <label>
		        <input type="checkbox" class="allergy" name="milk" th:field="*{milk}"> 우유
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="egg" th:field="*{egg}"> 달걀
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="peanut" th:field="*{peanut}"> 땅콩
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="nuts" th:field="*{nuts}"> 견과류
		    </label>
			<br>
			<br>

		    <label>
		        <input type="checkbox" class="allergy" name="seafood" th:field="*{seafood}"> 해산물
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="shellfish" th:field="*{shellfish}"> 갑각류
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="wheat" th:field="*{wheat}"> 밀
		    </label>
		    <label>
		        <input type="checkbox" class="allergy" name="leguminoseae" th:field="*{leguminoseae}"> 대두류
		    </label>
			<br>
			<br>
			<label>
			    <input type="checkbox" id="no-allergy" name="noAllergy"> 없음
			</label>
			<br>
			<br>
		    <button type="submit" class="submit-btn">제출하기</button>
		</form>
    </div>
	</center>
	<script>
	    // 모든 알러지 체크박스와 '없음' 체크박스를 선택
	    const allergyCheckboxes = document.querySelectorAll('.allergy');
	    const noAllergyCheckbox = document.getElementById('no-allergy');

	    // '없음' 체크박스 클릭 시 다른 체크박스 해제
	    noAllergyCheckbox.addEventListener('change', function () {
	        if (this.checked) {
	            allergyCheckboxes.forEach(checkbox => checkbox.checked = false);
	        }
	    });

	    // 다른 체크박스 클릭 시 '없음' 체크박스 해제
	    allergyCheckboxes.forEach(checkbox => {
	        checkbox.addEventListener('change', function () {
	            if (this.checked) {
	                noAllergyCheckbox.checked = false;
	            }
	        });
	    });
	</script>
</body>
</html>
